<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hanfu.cancel.dao.CancelMapper">
    <resultMap id="BaseResultMap" type="com.hanfu.cancel.model.record">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Oct 30 06:29:10 CST 2019.
        -->
        <result column="id" jdbcType="INTEGER" property="id"/>
        <result column="create_date" jdbcType="TIMESTAMP" property="createDate"/>
        <result column="real_name" jdbcType="VARCHAR" property="realName"/>
        <result column="purchase_price" jdbcType="INTEGER" property="purchasePrice"/>
        <result column="purchase_quantity" jdbcType="INTEGER" property="purchaseQuantity"/>
        <result column="site" jdbcType="VARCHAR" property="site"/>
        <result column="cancel_id" jdbcType="VARCHAR" property="cancelId"/>
        <result column="present_money" jdbcType="VARCHAR" property="presentMoney"/>

    </resultMap>


    <select id="select" resultMap="BaseResultMap">
        select h1.present_money,h1.id,h1.money,h1.create_date,h2.real_name,h1.site from cancel h1 left join hf_user h2
        on h1.user_id=h2.id
    </select>
    <select id="selectDate" resultMap="BaseResultMap">
        select h1.present_money,h1.id,h1.money,h1.create_date,h2.real_name,h1.site from cancel h1 left join hf_user h2
        on h1.user_id=h2.id where h1.create_date between #{createData} and #{createDate1}
    </select>

    <select id="selectRegion" resultMap="BaseResultMap">
        select h1.present_money,h1.id,h1.money,h1.create_date,h2.real_name,h1.site from cancel h1 left join hf_user h2
        on h1.user_id=h2.id WHERE h1.site LIKE concat('%',#{site},'%')
    </select>

    <select id="selectCancelId" resultMap="BaseResultMap">
        select h1.present_money,h1.id,h1.money,h1.create_date,h2.real_name,h1.site from cancel h1 left join hf_user h2
        on h1.user_id=h2.id where h1.id=#{cancelId}
    </select>

    <select id="Test" resultMap="BaseResultMap">
        select h1.present_money,h1.id,h1.money,h1.create_date,h2.real_name,h1.site from cancel h1 left join hf_user h2
        on h1.user_id=h2.id
        WHERE 1=1
        <if test="site!=null and createData!=null and createDate1!=null">
            AND (h1.create_date between #{createData} and #{createDate1})
            AND
            h1.site LIKE concat('%',#{site},'%')
        </if>
        /*CONCAT(h1.site,h1.money)*/
        <if test="site!=null">
            AND h1.site LIKE concat('%',#{site},'%')
        </if>
        <if test="createData != null and createDate1!=null">
            AND h1.create_date between #{createData} and #{createDate1}
        </if>
    </select>
</mapper>